!function(t){function e(n){if(i[n])return i[n].exports;var o=i[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,e),o.l=!0,o.exports}var i={};e.m=t,e.c=i,e.d=function(t,i,n){e.o(t,i)||Object.defineProperty(t,i,{configurable:!1,enumerable:!0,get:n})},e.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(i,"a",i),i},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=15)}([function(t,e,i){"use strict";var n=i(25);i.d(e,"a",function(){return n.a}),i.d(e,"b",function(){return n.b})},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.TARGET_FPS=30;e.WEIGHT_PRED_R=1.3;e.WEIGHT_PRED_G=.7;e.WEIGHT_PRED_B=1;e.START_POP=20;e.MOTE_BASE_SIZE=.015;e.MOTE_BASE_ALPHA=1;e.MOTE_BASE_SPEED=5e-4;e.MOTE_BASE_SIGHT=.15;e.PREGNANT_THRESHOLD=172;e.PREGNANT_TIME=30;e.DEATH_THRESHOLD=18;e.GRAVITY=6.67408e-8;e.GLOBAL_DRAG=.1;e.PHOTON_BASE_SIZE=.015;e.PHOTON_LIFETIME=300;e.MARKER_HIT_LIFETIME=30;e.MARKER_HIT_SIZE=.1;e.VOID_SIZE=.01;e.EMITTER_SIZE=.01;e.MAX_MOTES=300;e.MAX_PHOTONS=25800;e.MAX_VOIDS=5;e.MAX_EMITTERS=5;e.MAX_ENTITIES=26110;e.POSITIVE_ENERGY=.01;e.NEGATIVE_ENERGY=.01;e.DEBUG=!1;e.VALIDATE_VECTORS=!0;let n;const o=n="undefined"!=typeof SharedArrayBuffer?SharedArrayBuffer:ArrayBuffer;e.BUFFER_TYPE=o},function(t,e,i){"use strict";function n(t){return t+1e-11*s()}function o(t,e=0,i=1/0){return w(t)<w(e)?t=t<0?-e:e:w(t)>w(i)&&(t=t<0?-i:i),t}function s(){return _()>.5?1:-1}function r(t,e){return t/(w(t)+w(e))}Object.defineProperty(e,"__esModule",{value:!0}),e.twiddle=n,e.logisticSmooth=function(t,e,i=2*t,n=1){return i/(1+v(y,n*t-e))},e.adjRand=function(t=1){return(2*_()-1)*t},e.posneg=s,e.ratio=r,e.rat_vec2=function(t){return r(t[C],t[A])},e.evenNumber=function(t){return t>>1<<1};var a=i(0),c=i(1);const{vec2:l,magnitude:h,mut_normalize:u,distance:f,mut_times:d,mut_copy:p,mut_clamp:m}=a.b,{minus:g}=a.a,{sqrt:b,abs:w,E:y,pow:v,cos:E,sin:S,random:_,PI:O}=Math,C=0,A=1,M=function(){let t=0,e=0;return function(i){for(t=0,e=i.length;t<e;++t)i[t]=n(i[t]);return i}}();e.twiddleVec=M;const P=function(){let t,e;return function(i){for(t=0,e=i.length;t<e;t++){if(isNaN(i[t]))throw new Error("NaN vector");if(i[t]===1/0)throw new Error("Infinite vector");if(i[t]===-1/0)throw new Error("-Infinite vector")}}}();e.validate=P;const x=function(){let t=l();return function(e,i){return h(g(e,i,t))}}();e.dist=x;const T=function(){let t=0,e=0;return function(i,n=0,s=1/0){for(t=0,e=i.length;t<e;++t)i[t]=o(i[t],n,s)}}();e.limitVecMut=T;const j=function(){let t=l(),e=0,i=0,n=0,o=0;return function(s,r,a,l){if(l=l||t,g(s,r,l),e=h(l),i=l[0],n=l[1],0===i&&0===n||0===e)return l;if(o=m(1/b(i*i+n*n),1e-11,1e11),a=m(a,-1e11,1e11),l[0]=i*o,l[1]=n*o,d(l,-a*c.GRAVITY/(e*e)),c.VALIDATE_VECTORS)try{P(l)}catch(t){console.log("gravitation error",t),console.log(a),g(s,r,l),console.log("minus",l),T(l,1e-5,10),console.log("limit",l),e=h(l),console.log("magnitude",e),u(l),console.log("normalize",l),d(l,-a/(e*e)),console.log("scale",l),l.fill(0)}return l}}();e.gravitate=j;const I=function(){let t=l(),e=0,i=0,n=0;return function(o,s,r,a){if(a=a||t,g(o,s,a),i=a[0],n=a[1],0===i&&0===n)return a;if(e=m(1/b(i*i+n*n),1e-11,1e11),r=m(r,-1e11,1e11),a[0]=i*e,a[1]=n*e,d(a,-r),c.VALIDATE_VECTORS)try{P(a)}catch(t){console.log("acceleration error",t),console.log("strength",r),g(o,s,a),console.log("minus",a),u(a),console.log("normalize",a),d(a,-r),console.log("scale",a),a.fill(0)}return a}}();e.accelerate=I;const z=function(){let t=l(),e=0,i=0,n=0,s=0,r=0;return function(a,l,f){if(f=f||t,i=h(a),i=o(i,0,1e11),e=m(l*i*i,1e-11,1e11),p(f,a),s=f[0],r=f[1],0===s&&0===r||0===e)return f;if(n=m(1/b(s*s+r*r),1e-11,1e11),e=m(e,1e-11,1e11),f[0]=s*n,f[1]=r*n,d(f,-1),d(f,e),c.VALIDATE_VECTORS)try{P(f)}catch(t){console.log("drag error",t),console.log(l,i,e),console.log("magnitude",h(a)),p(f,a),console.log("copied",f),u(f),console.log("normalized",f),d(f,-1),console.log("inverted",f),d(f,e),console.log("scaled",f),f.fill(0)}return f}}();e.drag=z;const R=function(){let t=l(),e=0;return function(i,n,o,s,r,a){return e=f(n,o)*s,a=a||t,a[0]=0,a[1]=0,e>1&&I(n,o,r*e*e,a),a}}();e.avoid=R;const k=function(){let t=0,e=0;return function(i){for(t=0,e=i.length;t<e;++t)i[t]=w(i[t]);return i}}();e.absVec=k;const D=function(t,e){let i=t[0],n=t[1];return i>e||i<-e||(n>e||n<-e)};e.outOfBounds=D;const N=function(){let t=0,e=0,i=0,n=0,o=l(),s=l();return function(r,a,c,l){return l=l||o,t=E(c*O),e=S(c*O),g(r,a,s),i=s[C],n=s[A],l[C]=i*t-n*e,l[A]=i*e+n*t,l}}();e.rotate=N;const L=function(){let t=0,e=0;return function(i){for(t=i.length;t;t--)e=Math.floor(Math.random()*t),[i[t-1],i[e]]=[i[e],i[t-1]]}}();e.shuffle=L},function(t,e,i){"use strict";function n(){return this.entities=[],this.photonBuffer=null,this.stats={pop:0,born:0,died:0,target:0},this.actions={},this.registerActions(),this.started=!1,this}Object.defineProperty(e,"__esModule",{value:!0}),e.Game=n;var o=i(12),s=i(13),r=i(38),a=i(39),c=i(8),l=i(40);i.d(e,"Mote",function(){return o.c}),i.d(e,"Void",function(){return s.a}),i.d(e,"Emitter",function(){return r.a}),i.d(e,"Marker",function(){return a.a}),i.d(e,"Photon",function(){return c.e}),i.d(e,"AntiGravitonCluster",function(){return l.a});var h=i(2),u=i(41),f=i(0),d=i(1);const{minus:p}=f.a,{vec2:m,mut_copy:g}=f.b,b=new Uint16Array(d.MAX_MOTES+d.MAX_PHOTONS+100);let{random:w}=Math,y=0,v=0;n.prototype.start=function(){this.motePool=new u.a(o.b,d.MAX_MOTES),this.photonPool=new u.a(c.a,d.MAX_PHOTONS);for(let t=0;t<d.START_POP;++t)this.entities.push(new o.c.random(this.motePool));this.started=!0},n.prototype.tick=function(){let t,e,i=0,n=0,s=0;return function(r){let l=r.interval/r.elapsed,u=r.frameCount;for(t=this.entities,this.stats.target=0,this.stats.pop=0,s=l/d.TARGET_FPS,i=0,n=t.length;i<n;++i)(e=t[i]).tick(this.entities,s,u),e instanceof o.c?(this.stats.pop++,e.target&&this.stats.target++,e.injured&&u%~~(.1*d.TARGET_FPS)==0&&this.entities.push(e.bleed(this.photonPool)),e.dying===d.DEATH_THRESHOLD?(this.killMote(e),b[y]=i,this.stats.died++,y++):e.pregnant===d.PREGNANT_TIME&&(this.entities.push(e.split()),this.stats.born++)):e instanceof c.e||e instanceof a.a?e.lifetime<=0&&(b[y]=i,y++):e.mass<=0&&(b[y]=i,y++),Object(h.outOfBounds)(e.pos,20)&&(b[y]=i,y++);for(;y>0;)v=b[--y],(e=t[v])&&void 0!==e.pool&&e.destroy(),t.splice(v,1),b[y]=0}}(),n.prototype.emitPhoton=function(){let t=m(),e=m(),i=m(),n=0,o=m(.05,.05);return function(s,r,a,l=n,u=12){return s=s||[1.8*w()-.9,1.8*w()-.9],r?g(e,r):(g(e,o),Object(h.rotate)(e,i,n%u/(u/2),e)),a=a||~~(3*w()),g(t,s),this.entities.push(new c.e(t,e,a,this.photonPool)),n++,a}}(),n.prototype.killMote=function(){let t=0,e=0,i=0,n=m(),o=0,a=0,c=0;return function(l){for(w()<d.POSITIVE_ENERGY&&this.entities.push(new r.a(l.pos,l.vel,~~(10*d.DEATH_THRESHOLD*w()),this.photonPool)),w()<d.NEGATIVE_ENERGY&&this.entities.push(new s.a(l.pos,l.vel,~~(10*d.DEATH_THRESHOLD*w()))),g(n,l.pos),o=l.photons[0],a=l.photons[1],c=l.photons[2],t=o+c+a,e=0,i=0;i<t;++i)o===i&&(e=1),o+a===i&&(e=2),this.emitPhoton(n,void 0,e,i,t)}}(),n.prototype.registerAction=function(t,e){this.actions[t]=e.bind(this)};let E=m();n.prototype.registerActions=function(){this.registerAction("launchAntiGravitonCluster",function(t){p(this.player.mouseUp,t,E),this.entities.push(new l.a(t,E,148))})}},function(t,e,i){"use strict";function n(t,e,i){let n=e.indexOf(t);return-1!==n&&(i.push(e.splice(n,1)),!0)}function o(t){return-1===l.indexOf(t)&&-1===h.indexOf(t)?(d++,n(t,c,l)||l.push(t),fetch(f+t).then(function(t){return function(t,e){return new Promise((i,o)=>{if(e.ok){let o=e.headers.get("Content-type");return a.a(o)(e).then(e=>(function(t,e,i,o){let s=new function(t,e,i){return this.uri=t,this.content=e,this.type=i,this}(t,e,i);u[t]=s,d--,n(t,l,h),o(s)})(t,e,o,i))}o("failed to fetch asset "+t)})}.bind(null,t)}(t))):l.indexOf(t)>=0?new Promise(e=>{let i=0,n=setInterval(()=>{if(void 0!==u[t]?(e(u[t]),clearInterval(n)):i++,i>100)throw clearInterval(n),Error("stuck in fetching status way too long")},250)}):h.indexOf(t)>=0?Promise.resolve(u[t]):void 0}function s(t){let e=u[t];return void 0===e?o(t):Promise.resolve(e)}function r(t){-1===c.indexOf(t)&&-1===l.indexOf(t)&&void 0===u[t]&&c.push(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.requestAsset=s,e.requestAssetList=function(t){return Promise.all(t.map(t=>s(t)))},e.enqueueAsset=r,e.enqueueAssetList=function(t){t.forEach(t=>r(t))},e.processQueue=function(){return Promise.all(c.map(t=>o(t)))},e.setGlobalAssetPrefix=function(t){f=t};var a=i(22);const c=[],l=[],h=[],u={};let f="",d=0},function(t,e,i){"use strict";function n(t){if(0===t.length)return[[]];for(var e=[],i=0;i<t.length;i++)for(var o=t.slice(),s=o.splice(i,1),r=n(o),a=0;a<r.length;a++){var c=s.concat(r[a]);e.push(c)}return e}function o(t){return this[t]}function s(t,e){return t(e.map(t=>this[t]))}function r(t,e){return function(){let i=t.apply(null,[e].concat(Array.prototype.slice.apply(arguments)));if(!(i instanceof Float32Array))return i;switch(i.length){case 2:return g(m.vec2(i));case 3:return g(m.vec3(i));case 4:return g(m.vec4(i));default:return g(m(i.length,i))}}}function a(t,e,i){return t+i*(e-t)}function c(t,e,i,n,o,s,r,a){return t*o+e*s+i*r+n*a}function l(t){return D(t,t)}function h(t,e,i){return N(t,e,i,t)}function u(t,e,i,n,o){return L(t,e,i,n,o,t)}function f(t,e){return G(t,e,t)}function d(t,e,i){return U(t,e,i,t)}function p(t){let e=t.toArray().map(t=>t.toFixed(2));return"vec"+t.length+"("+e.join(", ")+")"}function m(){var t,e=arguments.length;if(0===e)throw new Error("vectors.create requires at least one argument");if(1===e)t=new Float32Array(arguments[0]);else{let e,i=Array.prototype.slice.apply(arguments),n=0,o=i.shift(),s=i.length;s>0&&i[s-1]instanceof ArrayBuffer?(n=0,e=i.pop()):s>1&&i[s-2]instanceof ArrayBuffer&&(n=i.pop(),e=i.pop()),t=void 0!==e?new Float32Array(e,n,o):new Float32Array(o),i.length>0&&t.set(S(i))}return t}function g(t){return b.wrap(t,t.length,1),t.toString=r(p,t),t.homogenous=r(R,t),t.times=r(G,t),t.lerp=r(N,t),t.cubic=r(L,t),t.dot=r(F,t),t.clamp=r(U,t),t.angle=B.bind(null,t),t.magnitude=k.bind(null,t),t.distance=H.bind(null,t),t.normalize=r(D,t),t.mut_normalize=r(l,t),t.mut_times=r(f,t),t.mut_lerp=r(h,t),t.mut_cubic=r(u,t),t.mut_clamp=r(d,t),t.mut_copy=r(z,t),2!==t.length&&3!==t.length||(t.cross=r(q,t)),function(t){let e,i,n;2===t.length?(i=T,n=M):3===t.length?(i=j,n=M.concat(P)):(i=I,n=M.concat(P,x));for(let e=0,n=i.length;e<n;++e){let n=o.bind(t,i[e].i);for(let o=0,s=i[e].names.length;o<s;++o)Object.defineProperty(t,i[e].names[o],{get:n})}for(let i=0,o=n.length;i<o;++i){switch(n[i].length){case 2:e=m.vec2;break;case 3:e=m.vec3;break;case 4:e=m.vec4}Object.defineProperty(t,n[i].join(""),{get:s.bind(t,e,n[i])})}}(t),t}Object.defineProperty(e,"__esModule",{value:!0}),e.mut_normalize=l,e.mut_lerp=h,e.mut_cubic=u,i.d(e,"times",function(){return G}),e.mut_times=f,i.d(e,"clamp",function(){return U}),e.mut_clamp=d,e.toString=p,e.create=m,e.wrap=g;var b=i(6);const{plus:w,minus:y,mut_plus:v,mut_minus:E}=b;e.plus=w,e.minus=y,e.mut_plus=v,e.mut_minus=E;let S=b.flatten,{sqrt:_,min:O,max:C,acos:A}=Math;const M=[];e.aliasCombos2d=M;const P=[];e.aliasCombos3d=P;const x=[];e.aliasCombos4d=x;const T=[{names:["x"],i:0},{names:["y"],i:1}];e.aliases2d=T;const j=[{names:["x","r"],i:0},{names:["y","g"],i:1},{names:["z","b"],i:2}];e.aliases3d=j;const I=[{names:["w","a"],i:3}].concat(j);e.aliases4d=I,n("xy".split("")).forEach(t=>{M.push(t)}),["xz","yz","xyz","rgb"].forEach(t=>{n(t.split("")).forEach(t=>{P.push(t)})}),["yxw","zxw","yzw","xyzw","rga","rba","gba","rgba"].forEach(t=>{n(t.split("")).forEach(t=>{x.push(t)})});const z=(()=>{let t=0,e=0,i=0;return function(n,o){for(t=0,e=n.length,i=o.length;t<e&&t<i;++t)n[t]=o[t];return n}})();e.mut_copy=z;const R=function(){let t=0,e=0;return function(i,n){for(e=i.length,n=n||m(i.length+1),t=0;t<e;++t)n[t]=i[t];return n[t]=1,n}}();e.homogenous=R;const k=function(){let t=0,e=0,i=0,n=0;return function(o){for(t=0,i=0,n=o.length;i<n;++i)e=o[i],t+=e*e;return _(t)}}();e.magnitude=k;const D=function(){let t=0,e=0,i=0;return function(n,o){for(i=n.length,o=o||m(i),t=1/k(n),e=0;e<i;++e)o[e]=n[e]*t;return o}}();e.normalize=D;const N=function(){let t=0,e=0;return function(i,n,o,s){for(e=i.length,s=s||m(e),t=0;t<e;++t)s[t]=a(i[t],n[t],o);return s}}();e.lerp=N;const L=function(){let t=0,e=0,i=0,n=0,o=0,s=0,r=0,a=0,l=0;return function(h,u,f,d,p,g){for(e=h.length,g=g||m(e),s=(n=(i=1-p)*i)*i,r=3*p*n,a=3*(o=p*p)*i,l=o*p,t=0;t<e;++t)g[t]=c(h[t],u[t],f[t],d[t],s,r,a,l);return g}}();e.cubic=L;const F=function(){let t=0,e=0;return function(i,n){for(e=0,t=i.length;t--;)e+=i[t]*n[t];return e}}();e.dot=F;var G=function(){let t=0;return function(e,i,n){if(t=e.length-1,"number"==typeof i){for(n=n||new Float32Array(t+1);t>=0;--t)n[t]=e[t]*i;return n}return F(e,i)}}();const B=function(){let t,e;return function(i,n){return t=D(i),e=D(n),A(G(t,e))}}();e.angle=B;const H=function(){let t=0,e=0,i=0,n=0;return function(o,s){for(i=0,e=o.length,t=0;t<e;++t)n=s[t]-o[t],i+=n*n;return _(i)}}();e.distance=H;const q=function(){let t=0,e=0,i=0,n=0,o=0,s=0;return function(r,a,c){if(!(r.length>3||a.length>3||r.length<2||a.length<2))return c=c||m(3),t=r[0],e=r[1],i=r[2]||0,n=a[0],o=a[1],s=a[2]||0,c[0]=e*s-i*o,c[1]=i*n-t*s,c[2]=t*o-e*n,c}}();e.cross=q;var U=(()=>{let t=0,e=0;return function(i,n,o,s){if("number"==typeof i)return function(t,e,i){return C(O(t,i),e)}(i,n,o);for(s=s||new Float32Array(i.length),t=0,e=i.length;t<e;++t)s[t]=U(i[t],n,o);return s}})();const V=m.vec2=m.bind(null,2);e.vec2=V;const W=m.vec3=m.bind(null,3);e.vec3=W;const X=m.vec4=m.bind(null,4);e.vec4=X},function(t,e,i){"use strict";function n(t){if(t instanceof Object&&"number"==typeof t.length){let e=0,i=t.length,o=[];for(;e<i;++e)o=o.concat(n(t[e]));return o}return t}function o(t,e){return t.rows===e.rows&&t.cols===e.cols||void 0===t.rows&&void 0===e.rows&&t.length===e.length||1===e.cols&&void 0===e.cols&&t.rows===e.length||1===t.rows&&void 0===e.rows&&t.cols===e.length}function s(t,e){return m(t,e,t)}function r(t,e){return g(t,e,t)}function a(t,e){return b(t,e,t)}function c(t,e){return w(t,e,t)}function l(t){return Array.prototype.slice.apply(t)}function h(t,e,i=[],o,s=0){var r;r=o?new Float32Array(o,s,e*t):new Float32Array(e*t);var a=n(i);return r.rows=t,r.cols=e,a.length?r.set(a):r.fill(0),r}Object.defineProperty(e,"__esModule",{value:!0}),e.flatten=n,e.likeMatrices=o,e.mut_plus=s,e.mut_plus_scalar=r,e.mut_minus=a,e.mut_minus_scalar=c,e.mut_multiply_scalar=function(t,e){return E(t,e,t)},e.toArray=l,e.create=h,e.wrap=function(t,e,i){return t.rows=e||t.rows,t.cols=i||t.cols,t.toArray=l.bind(null,t),t.toString=_.bind(null,t),t.col=y.bind(null,t),t.row=v.bind(null,t),t.plus=m.bind(null,t),t.plus_scalar=g.bind(null,t),t.minus=b.bind(null,t),t.minus_scalar=w.bind(null,t),t.dot=S.bind(null,t),t.multiply_scalar=E.bind(null,t),t.mut_plus=s.bind(null,t),t.mut_plus_scalar=r.bind(null,t),t.mut_minus=a.bind(null,t),t.mut_minus_scalar=c.bind(null,t),t};var u=i(5);const{cos:f,sin:d}=Math,p=u.create,m=function(){let t=0,e=0,i=0,n=0;return function(s,r,a){if(o(s,r)){for(e=s.length,i=s.rows,n=s.cols,a=a||h.similar(s),t=0;t<e;++t)a[t]=s[t]+r[t];return a}}}();e.plus=m;const g=function(){let t=0;return function(e,i,n){for(n=n||h(e.rows,e.cols),i=+i,t=e.length;t--;)n[t]=e[t]+i;return n}}();e.plus_scalar=g;const b=function(){let t=0,e=0,i=0;return function(n,s,r){if(o(n,s)){for(t=n.length,i=n.rows||0,e=n.cols||t,r=r||h.similar(n);t--;)r[t]=n[t]-s[t];return r}}}();e.minus=b;const w=function(){let t=0;return function(e,i,n){for(n=n||h(e.rows,e.cols),i=+i,t=e.length;t--;)n[t]=e[t]-i;return n}}();e.minus_scalar=w;const y=function(){let t=0,e=0;return function(i,n,o){o=o||h(i.rows,1);let s=i.cols;for(t=0,e=i.rows;t<e;++t)o[t]=i[t*s+n];return o}}();e.col=y;const v=function(){let t=0,e=0;return function(i,n,o){o=o||h(1,i.cols);let s=i.cols;for(t=0,e=i.cols;t<e;++t)o[t]=i[s*n+t];return o}}();e.row=v;const E=function(){let t=0,e=0;return function(i,n,o){for(o=o||h(i.rows,i.cols),t=0,e=i.length;t<e;++t)o[t]=i[t]*n;return o}}();e.multiply_scalar=E;const S=function(){let t=0,e=0,i=0,n=0,o=0,s=0,r=0,a=0,c=0,l=0,u=0,f=0;return function(d,p,m){if(r=void 0!==d.cols?d.cols:d.length,o=void 0!==p.rows?p.rows:p.length,r===o){for(a=void 0!==d.rows?d.rows:1,n=void 0!==p.cols?p.cols:1,t=p.length,m=m||h(a,n),f=0,c=0;c<a;++c)for(l=c*r,s=0;s<t;++s)u=l+(e=s/n|0),m[f=n*c+(i=s%n)]=m[f]+p[s]*d[u];return m}}}();e.dot=S;const _=function(){function t(t,e){return(" ".repeat(t)+e).slice(-t)}let e,i,n,o="",s=0,r=0,a=0,c=0;return function(h){for(s=0|h.cols,r=0|h.rows,o="matrix(",e=function(t){return l(t).map(t=>t.toFixed(2))}(h),i=e.reduce((t,e)=>Math.max(t,e.length),0),a=0;a<r;++a)n=e.slice(a*s,2*(a+1)*s);for(a=0,c=e.length;a<c;++a)e[a]=t(i,e[a]),a>0&&(o+=a%s==0?"\n       ":", "),o+=e[a];return o+")"}}();e.toString=_,h.similar=function(t,...e){return t.rows&&t.cols?h.apply(null,[t.rows,t.cols].concat(e)):p.apply(null,[t.length].concat(e))},h.identity=function(){let t=0,e=0,i=0;return function(n,o,s=0){let r=h(n|=0,n,void 0,o,s);for(t=0,e=n*n,i=n+1|0;t<e;t+=i)r[t]=1;return r}}(),h.translation=function(){let t=Float32Array.from([1,0,0,0,1,0,0,0,1]),e=Float32Array.from([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);return function(i,n,o=0){switch(i.length){case 2:return t[2]=i[0],t[5]=i[1],h(3,3,t,n,o);case 3:return e[3]=i[0],e[7]=i[1],e[11]=i[2],h(4,4,e,n,o);default:return}}}(),h.rotateX=function(){let t=0,e=0,i=Float32Array.from([1,0,0,0,1,0,0,0,1]);return function(n,o,s=0){return t=f(n),e=d(n),i[4]=t,i[5]=-e,i[7]=e,i[8]=t,h(3,3,i,o,s)}}(),h.rotateY=function(){let t=0,e=0,i=Float32Array.from([1,0,0,0,1,0,0,0,1]);return function(n,o,s=0){return t=f(n),e=d(n),i[0]=t,i[2]=e,i[6]=-e,i[8]=t,h(3,3,i,o,s)}}(),h.rotateZ=function(){let t=0,e=0,i=Float32Array.from([1,0,0,0,1,0,0,0,1]);return function(n,o,s=0){return t=f(n),e=d(n),i[0]=t,i[1]=-e,i[3]=e,i[4]=t,h(3,3,i,o,s)}}()},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.updateCompositeOperation=function(t,e){t.globalCompositeOperation!==e&&(t.globalCompositeOperation=e)},e.screenSpace=function(t){return(t+1)/2*l.minDimension},e.screenSpaceVec=function(t,e){return e[0]=(t[0]+1)/2*l.minDimension,e[1]=(t[1]+1)/2*l.minDimension,e},e.gameSpaceVec=function(t,e){e[0]=t[0]/l.minDimension*2-1,e[1]=t[1]/l.minDimension*2-1},e.offscreen=function(t,e){return t<-.5*l.width||t>1.5*l.width||e<-.5*l.height||e>1.5*l.height},e.drawCircle=function(t,e,i,n,o,s=0,r){t.globalCompositeOperation="source-over",t.beginPath(),t.arc(e,i,n,2*Math.PI,!1),t.fillStyle=o,t.fill(),r&&(t.strokeStyle=r,t.lineWidth=s,t.stroke()),t.closePath()},e.tick=function(){h||(h=!0),n.draw(),o.draw(a),r.draw()},e.init=function(t,e){a=t.game,l=e.props,c=t.controls,n.init(e),o.init(e),r.init(e)};var n=i(36),o=i(37),s=i(11),r=i(42);i.d(e,"bokeh",function(){return n}),i.d(e,"entities",function(){return o}),i.d(e,"sprites",function(){return s}),i.d(e,"ui",function(){return r});let a,c,l,h=!1},function(t,e,i){"use strict";function n(t,e,i,n){let o;this.pool=n,n?(o=n.buffer,this.offset=n.allocate()):(o=new ArrayBuffer(w),this.offset=0),this.pos=a(t[0],t[1],o,u+this.offset),this.vel=a(e[0],e[1],o,f+this.offset),this.intVals=new Uint8ClampedArray(o,d+this.offset,b),Object.defineProperties(this,{color:{get:()=>this.intVals[p],set:t=>this.intVals[p]=t},lifetime:{get:()=>this.intVals[m],set:t=>this.intVals[m]=t},mass:{get:()=>this.intVals[g],set:t=>this.intVals[g]=t}}),this.color=i,this.lifetime=r.PHOTON_LIFETIME,this.size=r.PHOTON_BASE_SIZE,this.mass=1,this.pulse=~~(r.TARGET_FPS*h())}e.e=n;var o=i(0),s=i(2),r=i(1);let{vec2:a,times:c}=o.b,{mut_plus:l}=o.a;const{random:h}=Math,u=0,f=8,d=f+8,p=0,m=p+1,g=m+1,b=g+1,w=d+b+(4-(d+b)%4);e.a=w;e.d=0,e.c=1,e.b=2;let y,v,E=a();n.prototype.tick=function(t,e){this.lifetime>0&&this.lifetime--,y=this.pos,v=this.vel,l(y,c(v,e,E)),l(v,Object(s.drag)(v,r.GLOBAL_DRAG))},n.prototype.destroy=function(){if(!this.pool)throw new Error("called photon.destroy, but photon has no pool");this.pool.free(this.offset)}},function(t,e,i){"use strict";function n(){return this.queue={},this}e.a=n,n.prototype.on=function(t,e){void 0===this.queue[t]&&(this.queue[t]=[]),this.queue[t].push(e)},n.prototype.fire=function(){let t,e;return function(i,n){if(void 0!==this.queue[i])for(t=0,e=this.queue[i].length;t<e;++t)this.queue[i][t].call(n)}}()},function(t,e,i){"use strict";e.b=30;e.a=6.67408e-8;e.c=!0},function(t,e,i){"use strict";function n(t,e){let i=w,n=w,o=w,s=t%64,a=s*w,c=(t-s)/64*w;return m.globalCompositeOperation="copy",m.drawImage(u,0,0,n,o),m.globalCompositeOperation="source-in",m.fillStyle=e,m.fillRect(0,0,n,o),f.drawImage(p,c,a,n,o),{canvas:r,context:f,pixelSize:i,sw:i,sh:i,sx:c,sy:a}}function o(t,e){return~~(t*e)}Object.defineProperty(e,"__esModule",{value:!0}),i.d(e,"moteSpriteSheetCanvas",function(){return r}),e.initMoteSpriteSheet=function(t,e){w=o(g=t,b=e),(p=document.createElement("canvas")).width=p.height=w,m=p.getContext("2d"),(r=document.createElement("canvas")).width=r.height=64*w,f=r.getContext("2d"),(u=document.createElement("canvas")).width=u.height=w,d=u.getContext("2d"),h=Array(4096);let i=d.createRadialGradient(w/2,w/2,w/2,w/2,w/2,0);i.addColorStop(1,"rgba(255,255,255,1.0"),i.addColorStop(.7,"rgba(255,255,255,0.5)"),i.addColorStop(.1,"rgba(255,255,255,0.0)"),d.fillStyle=i,d.fillRect(0,0,w,w);for(let t=0;t<4096;++t)s[t]="rgb("+((t&a)>>4)+","+(t&c)+","+((t&l)<<4)+")",h[t]=n(t,s[t])},e.createMoteCenterSprite=function(){let t=w,e=w,i=w,n=document.createElement("canvas");n.width=e,n.height=i;let o=n.getContext("2d");return o.globalCompositeOperation="copy",o.drawImage(u,0,0,e,i),o.globalCompositeOperation="source-in",o.fillStyle="rgba(255,255,255,0.25)",o.fillRect(0,0,e,i),{canvas:n,context:o,pixelSize:t,sw:t,sh:t,sx:0,sy:0}},e.getMoteSprite=function(t){return h[t]},e.getColorString=function(t){return s[t]},e.colorIndex=function(t,e,i){return(t>>4<<8)+(e>>4<<4)+(i>>4)},e.createMoteSprite=n,e.createPhotonSprite=function(t,e,i){let n=document.createElement("canvas");n.width=n.height=17;let o,s=n.getContext("2d");return(o=s.createRadialGradient(8,8,8,8,8,0)).addColorStop(.7,i),o.addColorStop(1,"white"),s.globalCompositeOperation="source-over",s.beginPath(),s.moveTo(8,0),s.quadraticCurveTo(8,8,0,8),s.quadraticCurveTo(8,8,8,17),s.quadraticCurveTo(8,8,17,8),s.quadraticCurveTo(8,8,8,0),s.fillStyle=o,s.fill(),s.closePath(),s.beginPath(),s.moveTo(8,4),s.lineTo(8,13),s.moveTo(4,8),s.lineTo(13,8),s.strokeStyle="white",s.lineWidth=1,s.stroke(),s.closePath(),{canvas:n,context:s,pixelSize:17,w:17,h:17}},e.createMarkerHitSprite=function(t,e){let i=o(t,e),n=~~(i/2),s=document.createElement("canvas");s.width=s.height=i;let r=s.getContext("2d"),a=r.createRadialGradient(n,n,n,n,n,0);return a.addColorStop(0,"rgba(255,255,255,0.0)"),a.addColorStop(.05,"rgba(255,255,255,0.4)"),a.addColorStop(.09,"rgba(255,255,255,0.35)"),a.addColorStop(.55,"rgba(255,255,255,0.0)"),r.fillStyle=a,r.fillRect(0,0,i,i),{canvas:s,context:r,pixelSize:i,w:i,h:i}},e.createVoidSprite=function(t,e){let i=o(t,e),n=document.createElement("canvas");n.width=n.height=i;let s=n.getContext("2d"),r=s.createRadialGradient(i/2,i/2,i/2,i/2,i/2,0);return r.addColorStop(1,"rgba(0,0,0,1.0)"),r.addColorStop(.5,"rgba(0,0,0,1.0)"),r.addColorStop(.479,"rgba(0,0,0,0.99)"),r.addColorStop(.442,"rgba(0,0,0,0.98)"),r.addColorStop(.44,"rgba(255,255,255,0.95)"),r.addColorStop(.43,"rgba(255,255,255,0.95)"),r.addColorStop(.41,"rgba(255,255,255,0.39)"),r.addColorStop(.37,"rgba(255,255,255,0.29)"),r.addColorStop(.36,"rgba(255,255,255,0.32)"),r.addColorStop(.34,"rgba(255,255,255,0.31)"),r.addColorStop(.3,"rgba(255,255,255,0.35)"),r.addColorStop(.28,"rgba(255,255,255,0.39)"),r.addColorStop(.26,"rgba(255,255,255,0.35)"),r.addColorStop(.23,"rgba(255,255,255,0.30)"),r.addColorStop(.21,"rgba(255,255,255,0.26)"),r.addColorStop(.2,"rgba(255,255,255,0.31)"),r.addColorStop(.19,"rgba(255,255,255,0.34)"),r.addColorStop(.17,"rgba(255,255,255,0.29)"),r.addColorStop(.16,"rgba(255,255,255,0.21)"),r.addColorStop(.15,"rgba(255,255,255,0.19)"),r.addColorStop(.14,"rgba(255,255,255,0.15)"),r.addColorStop(.1,"rgba(255,255,255,0.09)"),r.addColorStop(.09,"rgba(255,255,255,0.15)"),r.addColorStop(.07,"rgba(255,255,255,0.12)"),r.addColorStop(.05,"rgba(255,255,255,0.09)"),r.addColorStop(0,"rgba(0,0,0,0.0)"),s.fillStyle=r,s.fillRect(0,0,i,i),{canvas:n,context:s,w:i,h:i,pixelSize:i}},e.createEmitterSprite=function(t,e){let i=o(t,e),n=document.createElement("canvas");n.width=n.height=i;let s=n.getContext("2d"),r=s.createRadialGradient(i/2,i/2,i/2,i/2,i/2,0);return r.addColorStop(1,"rgba(255,255,255,0.3)"),r.addColorStop(.78,"rgba(255,255,255,0.3)"),r.addColorStop(.58,"rgba(255,255,255,0.22)"),r.addColorStop(.48,"rgba(255,255,255,0.17)"),r.addColorStop(.44,"rgba(255,255,255,0.22)"),r.addColorStop(.4,"rgba(255,255,255,0.19)"),r.addColorStop(.2,"rgba(255,255,255,0.09)"),r.addColorStop(.1,"rgba(255,255,255,0.0)"),s.fillStyle=r,s.fillRect(0,0,i,i),{canvas:n,context:s,w:i,h:i,pixelSize:i}},e.createGameSpaceMask=function(){let t=document.createElement("canvas");t.width=t.height=1e3;let e=t.getContext("2d"),i=e.createRadialGradient(500,500,500,500,500,0);return i.addColorStop(1,"rgba(0,0,0,0.0)"),i.addColorStop(.05,"rgba(0,0,0,0.0)"),i.addColorStop(0,"rgba(255,255,255,1.0)"),e.fillStyle=i,e.fillRect(0,0,1e3,1e3),{canvas:t,context:e,w:1e3,h:1e3,pixelSize:1e3}};const s=Array(4096);e.colorStrings=s;var r;const a=3840,c=240,l=15;var h,u,f,d,p,m,g=0,b=0,w=0},function(t,e,i){"use strict";function n(t=new Uint8Array(3),e=new Float32Array(2),i,n=o.MOTE_BASE_SPEED,s=o.MOTE_BASE_SIGHT,c=1,h=1){let u,f=0;i?(u=i.buffer,f=i.allocate()):(u=new ArrayBuffer(ot),f=0);let d=new Uint8ClampedArray(u,M+f,3),p=new Uint8ClampedArray(u,P+f,3);d[a.d]=t[a.d],d[a.c]=t[a.c],d[a.b]=t[a.b];let g=new Int8Array(u,T+f,F-M),b=new Float32Array(u,W+f,nt);this.pos=m(e,u,H*A+B+f),this.vel=m(0,0,u,q*A+B+f);let w=new Float32Array(u,U*A+B+f,3),y=new Float32Array(u,V*A+B+f,3);return this.target=void 0,this.color_string="",n+=Object(r.adjRand)(5e-4),s+=Object(r.adjRand)(.001),c+=Object(r.adjRand)(.001),h+=Object(r.adjRand)(.001),Object.defineProperties(this,{photons:{get:()=>d},color:{get:()=>p},dying:{get:()=>g[j],set:t=>g[j]=t},action:{get:()=>g[L],set:t=>g[L]=t},pregnant:{get:()=>g[I],set:t=>g[I]=t},injured:{get:()=>g[z],set:t=>g[z]=t},lastInjury:{get:()=>g[R],set:t=>g[R]=t},needsUpdate:{get:()=>g[D],set:t=>g[D]=t},pulse:{get:()=>g[N],set:t=>g[N]=t},lastMeal:{get:()=>g[k],set:t=>g[k]=t},size:{get:()=>b[X],set:t=>b[X]=t},sizeMin:{get:()=>b[Y],set:t=>b[Y]=t},sizeMax:{get:()=>b[Z],set:t=>b[Z]=t},speed:{get:()=>b[K],set:t=>b[K]=t},sight:{get:()=>b[Q],set:t=>b[Q]=t},agro:{get:()=>b[J],set:t=>b[J]=t},fear:{get:()=>b[$],set:t=>b[$]=t},potential:{get:()=>b[tt],set:t=>b[tt]=t},resistance:{get:()=>b[et],set:t=>b[et]=t},mass:{get:()=>b[it],set:t=>b[it]=t},base_speed:{get:()=>n},base_sight:{get:()=>s},base_agro:{get:()=>c},base_fear:{get:()=>h},pool:{get:()=>i},offset:{get:()=>f},ratios:{get:()=>w},prefs:{get:()=>y}}),o.DEBUG&&Object.defineProperties(this,{intVals:{get:()=>g},floatVals:{get:()=>b}}),this.dying=0,this.pregnant=0,this.injured=0,this.lastInjury=0,this.speed=n,this.sight=s,this.agro=c,this.fear=h,this.potential=2*this.agro,this.resistance=2*this.fear,this.lastMeal=~~(3*l()),this.pulse=~~(o.TARGET_FPS*l()),this.size=o.MOTE_BASE_SIZE,this.sizeMin=.5*o.MOTE_BASE_SIZE,this.sizeMax=3*o.MOTE_BASE_SIZE,this.updateProperties(),this.prefs[a.d]=this.ratios[a.d],this.prefs[a.c]=this.ratios[a.c],this.prefs[a.b]=this.ratios[a.b],this}e.c=n;var o=i(1),s=i(0),r=i(2),a=i(8),c=i(13);let{random:l,max:h,min:u,floor:f,ceil:d,sin:p}=Math;const{vec2:m,times:g,mut_clamp:b,magnitude:w,distance:y,mut_copy:v,mut_times:E}=s.b,{plus:S,mut_plus:_}=s.a,O=b,C=m(0,0);e.a=4;Object(r.twiddleVec)(C);const A=4,M=0,P=M+3,x=P+3,T=x,j=0,I=j+1,z=I+1,R=z+1,k=R+1,D=k+1,N=D+1,L=N+1,F=L+1,G=x+F,B=G+(A-G%A),H=0,q=H+2,U=q+2,V=U+3,W=B+(V+3)*A,X=0,Y=X+1,Z=Y+1,K=Z+1,Q=K+1,J=Q+1,$=J+1,tt=$+1,et=tt+1,it=et+1,nt=it+1,ot=W+nt*A;e.b=ot;const st=m(),rt=m();n.prototype.updateProperties=function(){let t,e,i,n=0,s=0,c=0;return function(){if(({photons:t,ratios:i,color:e}=this),n=t[a.d],s=t[a.c],c=t[a.b],this.mass=n+s+c,this.mass>0&&(this.size=O(this.mass/(o.PREGNANT_THRESHOLD/3)*o.MOTE_BASE_SIZE,this.sizeMin,this.sizeMax),i[a.d]=Object(r.ratio)(n,s+c),i[a.c]=Object(r.ratio)(s,n+c),i[a.b]=Object(r.ratio)(c,s+n),this.speed=this.base_speed*(1-this.size)*(1+i[a.b]),this.sight=this.base_sight+.5*this.size,this.agro=this.base_agro*(1+i[a.d]),this.fear=this.base_fear*(1+i[a.c]),o.DEBUG)){if(isNaN(this.speed))throw new Error("Mote.updateProperties: NaN speed");if(isNaN(this.sight))throw new Error("Mote.updateProperties: NaN sight");if(isNaN(this.size))throw new Error("Mote.updateProperties: NaN size");if(isNaN(this.agro))throw new Error("Mote.updateProperties: NaN agro");if(isNaN(this.fear))throw new Error("Mote.updateProperties: NaN fear")}this.mass>o.PREGNANT_THRESHOLD&&0===this.pregnant&&(this.pregnant=o.PREGNANT_TIME),this.mass<o.DEATH_THRESHOLD&&0===this.dying&&(this.dying=1),e[a.d]=~~(n/this.mass*255),e[a.c]=~~(s/this.mass*255),e[a.b]=~~(c/this.mass*255),this.needsUpdate=0}}(),n.prototype.runMaintenance=function(){let t,e,i,n=0,s=0,a=0,c=0,l=0,h=0,u=0,f=0,d=0;return function(p){({pos:t,vel:e,pregnant:n,dying:s,agro:l,fear:h,size:u,speed:f,sight:d,target:i}=this),n>0&&(this.pregnant=n-1),s>0&&(this.dying=s+1),this.needsUpdate&&this.updateProperties(),a=l*(100*u),c=h*(100*u),this.potential=O(this.potential+l*p,-a,a),this.resistance=O(this.resistance+h*p,-c,c),_(t,g(e,p,st)),_(e,Object(r.avoid)(e,t,C,1.3,f,st)),_(e,Object(r.drag)(e,o.GLOBAL_DRAG))}}(),n.prototype.validateTarget=function(){let t,e=0,i=0;return function(n){return({pos:t,sight:i}=this),e=y(t,n.pos),n===this?-1:n.dying?-1:n.lifetime&&n.lifetime<3?-1:n.mass<1?-1:e>i+.5*n.size?-1:Object(r.outOfBounds)(n,.7)?-1:e}}(),n.prototype.search=function(){let t,e,i,o,s,r=0,l=0,f=0,d=0,p=0,m=0,g=0,b=0,w=0,y=0;return function(v){for(({pos:t,vel:e,sight:f}=this),i=-1/0,o=0,(this.pregnant||this.dying)&&(this.action=0,i=1/0),r=0,l=v.length;r<l&&i<1/0;++r){s=v[r];let t=this.validateTarget(s);-1!==t&&(s instanceof n?(d=1/t*3)>i&&(this.target=s,s.target===this||t<.5*(this.size+s.size)?this.action=3:this.action=2,i=d):s instanceof c.a?(this.target=s,this.action=3,i=1/0):s instanceof a.e&&s.lifetime>3&&(p=this.prefs[a.d]-this.ratios[a.d],m=this.prefs[a.c]-this.ratios[a.c],g=this.prefs[a.b]-this.ratios[a.b],w=h(p,m,g),b=u(p,m,g),(w==p&&s.color==a.d||w==m&&s.color==a.c||w==g&&s.color==a.b)&&(y=30),y=b==p&&s.color==a.d||b==m&&s.color==a.c||b==g&&s.color==a.b?10:20,(d=y*(1/t))>i&&(this.target=s,this.action=2,i=d)))}return!(i<0)}}(),n.prototype.tick=function(){let t,e,i,o,s,c,h,u,f,d,m;return function(b,y,E){switch(({pos:t,vel:e,size:i,sight:o,speed:s,agro:c,fear:h,resistance:u,potential:f,target:d}=this),this.runMaintenance(y),d&&-1===(m=this.validateTarget(d))&&(this.action=0),this.action){case 0:this.target=void 0,w(e)<.001?(st[0]=2*l()-1,st[1]=2*l()-1):(v(st,t),_(st,g(e,y,rt)),_(st,Object(r.rotate)(st,t,p((E+this.pulse)*s),rt))),_(e,Object(r.accelerate)(t,st,s,rt)),this.action=1;break;case 2:S(d.pos,g(d.vel,y,st),rt),_(e,Object(r.accelerate)(t,rt,s,st)),m<o&&(d instanceof n&&(this.potential,this.agro),this.action=4);break;case 3:S(d.pos,g(d.vel,y,st),rt),_(e,Object(r.accelerate)(rt,t,s,st)),this.resistance>3*h&&(this.action=0);break;case 4:d instanceof n?this.discharge(d):d instanceof a.e&&this.eatPhoton(d);break;case 5:break;case 1:this.search(b)||(this.action=0)}}}();let at=0;n.prototype.discharge=function(t){at=this.potential-t.resistance,t.resistance-=h(this.agro,at*this.agro),this.potential-=h(this.fear,at*this.fear),t.injure(this,h(0,~~at)),this.potential<0&&(this.action=0)},n.prototype.injure=function(t,e){this.injured+=e,this.lastInjury=this.injured,(this.resistance<3*this.agro||this.injured<this.fear)&&(this.target=t)},n.prototype.bleed=function(){let t,e=0,i=0,n=m();return function(o){t=this.photons;do{switch(e=~~(3*l())){case a.d:i=t[a.d];break;case a.c:i=t[a.c];break;case a.b:i=t[a.b]}}while(0===i);switch(e){case a.d:t[a.d]=t[a.d]-1;break;case a.c:t[a.c]=t[a.c]-1;break;case a.b:t[a.b]=t[a.b]-1}return this.injured--,E(this.vel,1+this.speed),v(n,this.vel),E(n,-1),this.needsUpdate=1,new a.e(this.pos,n,e,o)}}(),n.prototype.split=function(){let t,e;return function(){return e=this.photons,t=new n([f(e[a.d]/2),f(e[a.c]/2),f(e[a.b]/2)],this.pos,this.pool,this.base_speed,this.base_sight,this.base_agro,this.base_fear),e[a.d]=d(e[a.d]/2),e[a.c]=d(e[a.c]/2),e[a.b]=d(e[a.b]/2),this.pregnant=o.PREGNANT_TIME-1,t.pregnant=o.PREGNANT_TIME-1,this.target=t,t.target=this,t.needsUpdate=1,this.needsUpdate=1,t}}(),n.prototype.eatPhoton=function(){let t;return function(e){if(e.lifetime>2&&y(this.pos,e.pos)<this.sight){switch(t=this.photons,e.lifetime=2,e.color){case a.d:t[a.d]+=1;break;case a.c:t[a.c]+=1;break;case a.b:t[a.b]+=1}this.lastMeal=e.color,this.potential-=.5*this.agro,this.resistance-=.5*this.fear,this.needsUpdate=1}this.action=0}}();const ct=new Float32Array(2),lt=new Uint8ClampedArray(3);n.random=function(t){do{ct[0]=l()*Object(r.posneg)(),ct[1]=l()*Object(r.posneg)()}while(w(ct)>.8);return lt[0]=~~(64*l()),lt[1]=~~(64*l()),lt[2]=~~(64*l()),new n(lt,ct,t)},n.prototype.destroy=function(){this.pool.free(this.offset)}},function(t,e,i){"use strict";function n(t=c(),e=c(),i=1){return this.pos=c(t),this.vel=c(e),this.size=0,this.birthMass=i,this.mass=1,this.lastMeal=-1,this.eatTime=0,this}e.a=n;var o=i(0),s=i(2),r=i(3),a=i(1);const{vec2:c,times:l,mut_times:h,distance:u}=o.b,{mut_plus:f}=o.a,{random:d,sqrt:p,PI:m,ceil:g,min:b}=Math,w=c(0,0);let y,v=c(),E=0,S=0,_=0,O=0;n.prototype.tick=function(t,e){for(this.birthMass>0&&(O=b(this.birthMass,g(this.mass/100)),this.birthMass-=O,this.mass+=O),this.eatTime>30?this.eatTime--:this.lastMeal=-1,Object(s.outOfBounds)(this.pos,1.3)&&(this.mass=this.mass-1),this.size=p(this.mass/m)*a.VOID_SIZE,f(this.pos,l(this.vel,e,v)),f(this.vel,Object(s.avoid)(this.vel,this.pos,w,1.3,.01,v)),f(this.vel,Object(s.drag)(this.vel,a.GLOBAL_DRAG)),Object(s.limitVecMut)(this.vel,0,1),E=0,S=t.length;E<S;++E)(y=t[E])!==this&&(_=u(this.pos,y.pos),y instanceof r.Photon&&_<this.size&&(y.lifetime=y.lifetime-1,(0===y.lifetime||_<.6*this.size)&&(this.mass=this.mass+1,this.lastMeal=y.color,this.eatTime=15,y.lifetime=0)),y instanceof r.Mote&&_<.6*this.size&&30*d()*_<1&&(y.injured=y.injured+1),y instanceof n&&_<.44*(y.size+this.size)&&this.mass>y.mass&&(O=b(y.mass,g(this.birthMass+this.mass/100)),this.birthMass+=O,y.mass-=O),y.mass&&(y instanceof r.Emitter?f(y.vel,h(Object(s.gravitate)(y.pos,this.pos,this.mass/y.mass,v),1/y.mass)):y instanceof r.AntiGravitonCluster||f(y.vel,h(Object(s.gravitate)(y.pos,this.pos,y.mass*this.mass,v),1/y.mass))))}},function(t,e,i){"use strict";function n(t,e){e[0]=t.clientX,e[1]=t.clientY}e.b=function(t){a=t,window.addEventListener("mousedown",function(t){n(t,l.down),u[t.button]=1,c.fire("mousedown")}),window.addEventListener("mouseup",function(t){n(t,l.up),u[t.button]=0,c.fire("mouseup")}),window.addEventListener("mousemove",function(t){n(t,l.move)}),window.addEventListener("keydown",function(t){h[t.keyCode]=1}),window.addEventListener("keyup",function(t){h[t.keyCode]=0})};var o=i(0),s=i(43);const{vec2:r}=o.b;let a,c=new s.a;const l={down:r(),up:r(),move:r()};e.c=l;const h=Array(256),u=Array(5);e.a=u},function(t,e,i){"use strict";function n(){u.state.game.start(),console.log("game started")}Object.defineProperty(e,"__esModule",{value:!0}),e.startGame=n;var o=i(16),s=i(7),r=i(3),a=i(1),c=i(2),l=i(14);const h={container:"body",bufferDescriptions:[{label:"bokehBack",compositeMethod:"source-over",scaleMethod:o.a.buffers.SCALE_KEEP_ASPECT},{label:"bokehFront",compositeMethod:"lighter",scaleMethod:o.a.buffers.SCALE_NONE},{label:"entitiesLight",compositeMethod:"lighter",scaleMethod:o.a.buffers.SCALE_NONE},{label:"entitiesDark",compositeMethod:"hard-light",scaleMethod:o.a.buffers.SCALE_NONE},{label:"ui",compositeMethod:"source-over",scaleMethod:o.a.buffers.SCALE_NONE}],pixelRatio:1,frameCallback:function(){u.state.game.started&&u.state.game.tick(o.a.timing),u.draw.tick()}};var u={util:c,constants:a,display:o.a,game:r,draw:s,state:{}};window.photonomix=u,window.addEventListener("load",function(){u.state.game=new r.Game,o.a.init(h),s.init(u.state,o.a),l.b(u.state),u.state.controls=l.state,n()})},function(t,e,i){"use strict";i(17),i(20);var n=i(28);i(9),i(32),i(4),i(33),i(34),i(35);i.d(e,"a",function(){return n})},function(t,e,i){"use strict";i(18),i(19)},function(t,e,i){"use strict";e.a=function(t){return this.key=t,this.down=!1,this.lastDown=0,this.lastUp=0,Object.seal(this)}},function(t,e,i){"use strict";function n(t){return t=t.toLowerCase(),this.label=t,this.keys=[],this.checkedDown=0,this.checkedUp=0,Object.seal(this)}e.a=n,n.prototype.lastDown=function(){return this.keys.reduce((t,e)=>t=t>e.lastDown?t:e.lastDown,0)},n.prototype.lastUp=function(){return this.keys.reduce((t,e)=>t=t>e.lastDown?t:e.lastDown,0)},n.prototype.isDown=function(){return this.keys.reduce((t,e)=>t=t||e.down,!1)},n.prototype.onceDown=function(){return!!(this.lastUp()>=this.checkedDown&&this.isDown())&&(this.checkedDown=Date.now(),!0)},n.prototype.onceUp=function(){return this.lastDown()>=this.checkedUp&&!this.isDown()&&(this.checkedUp=Date.now(),!0)}},function(t,e,i){"use strict";i(21),i(23),i(24),i(27)},function(t,e,i){"use strict";function n(t,e,i,n){return this.frameCount=t,this.frameWidth=e,this.frameHeight=i,this.animations=n,this.context=void 0,this.flippedContext=void 0,this.ready=!1,this.width=0,this.height=0,this.rows=0,this.columns=0,Object.seal(this)}var o=i(4);let s=[];n.prototype.init=function(t,e=!0){let i=document.createElement("canvas");i.width=this.width=t.width,i.height=this.height=t.height,this.columns=i.width/this.frameWidth,this.rows=i.height/this.frameHeight;let n=i.getContext("2d");n.drawImage(t,0,0),this.context=n,e&&this.generateFlipped(),this.ready=!0},n.prototype.generateFlipped=function(){let t=document.createElement("canvas");t.width=this.width,t.height=this.height;let e,i,n,o,s,r,a=t.getContext("2d"),c=this.rows,l=this.cols,h=this.frameWidth,u=this.frameHeight;for(a.scale(-1,1),e=0,c=this.rows;e<c;++e)for(i=0,l=this.columns;i<l;++i)s=n=i*h,o=r=e*u,a.drawImage(this.context.canvas,n,o,h,u,-n-h,r,h,u);a.setTransform(1,0,0,1,0,0),this.flippedContext=a},n.prototype.draw=function(t,e,i,n,o=!1){let s=this.animations[e]?this.animations[e]:this.animations.default,r=s.startFrame+i%s.length,{frameWidth:a,frameHeight:c}=this,l=o?this.flippedContext.canvas:this.context.canvas;t.drawImage(l,function(t,e){return e%t.columns*t.frameWidth}(this,r),function(t,e){return Math.floor(e/t.columns)*t.frameHeight}(this,r),a,c,n[0],n[1],a,c)},n.fromAsepriteAtlas=function(t){return new Promise(e=>{void 0!==s[t]&&s[t]instanceof n?e(s[t]):(console.log(o),o.requestAsset(t).then(i=>{let r=i.content,a={default:{label:"default",startFrame:0,length:1}};r.meta.frameTags&&r.meta.frameTags.forEach(t=>{a[t.name.toLowerCase()]={label:t.name.toLowerCase(),startFrame:t.from,length:t.to-t.from+1}}),o.requestAsset(r.meta.image).then(i=>{let o=new n(r.frames.length,r.frames[0].frame.w,r.frames[0].frame.h,a);o.init(i.content),s[t]=o,e(o)})}))})}},function(t,e,i){"use strict";function n(t,e){if(void 0!==r[t])throw new Error("tried to add a mimeType but there's already a handler for it");r[t]=e}function o(t){return new Promise(e=>{t.blob().then(t=>{let i=document.createElement("img");i.addEventListener("load",()=>e(i)),i.src=URL.createObjectURL(t)})})}function s(t){return new Promise(e=>t.text().then(t=>e(t)))}e.a=function(t){return"function"==typeof r[t]?r[t]:r.default};const r={default:t=>new Promise(e=>t.blob().then(t=>e(t)))};n("image/jpeg",o),n("image/gif",o),n("image/png",o),n("text/html",s),n("text/plain",s),n("application/json",function(t){return new Promise(e=>t.json().then(t=>e(t)))})},function(t,e,i){"use strict";(function(){return this}).prototype.init=function(t){let e=document.createElement("canvas");e.width=this.width=t[0].width,e.height=this.height=t[0].height,this.columns=e.width/this.frameWidth,this.rows=e.height/this.frameHeight;let i=e.getContext("2d");for(let e=0,n=t.length;e<n;++e)i.drawImage(t[e],0,0);this.ready=!0,this.spriteCanvas=e}},function(t,e,i){"use strict";function n(t,e,i){return this.layers=t,this.animations=e,this.slices=i,this.source=void 0,this.context=void 0,this.flippedContext=void 0,this.ready=!1,Object.seal(this)}var o=i(4),s=i(0);const r=[];n.prototype.init=function(t,e=!0){this.source=t;let i=document.createElement("canvas");i.width=t.width,i.height=t.height;let n=i.getContext("2d");n.drawImage(t,0,0),this.context=n,e&&this.generateFlipped(),this.ready=!0},n.prototype.generateFlipped=function(){let t=document.createElement("canvas");t.width=this.context.canvas.width,t.height=this.context.canvas.height;let e=t.getContext("2d");e.scale(-1,1);let i,n,o,r=t=>{let n=this.slices[t],r=s.b.vec2(n.pos);s.b.mut_plus(r,o.frames[i].pos),e.drawImage(this.context.canvas,r[0],r[1],n.dims[0],n.dims[1],-r[0]-n.dims[0],r[1],n.dims[0],n.dims[1])};Object.keys(this.layers).forEach(t=>{for(o=this.layers[t],i=0,n=o.frames.length;i<n;++i)Object.keys(this.slices).filter(t=>"default"!==t).forEach(r)}),e.setTransform(1,0,0,1,0,0),this.flippedContext=e},n.prototype.draw=function(t,e,i,n=!1,o){let r=this.slices[e]?this.slices[e]:this.slices.default,a=n?this.flippedContext.canvas:this.context.canvas;void 0===o&&(o=Object.keys(this.layers)),o.forEach(e=>{let n=s.b.vec2(r.pos);s.b.mut_plus(n,this.layers[e].frames[0].pos),t.drawImage(a,n[0],n[1],r.dims[0],r.dims[1],i[0],i[1],r.dims[0],r.dims[1])})},n.prototype.animate=function(t,e,i,n,o=!1,s){void 0===s&&(s=Object.keys(this.layers));let r=this.animations[e]?this.animations[e]:this.animations.default,a=r.start+n%r.length,c=o?this.flippedContext.canvas:this.context.canvas;s.forEach(e=>{let n=this.layers[e].frames[a];t.drawImage(c,n.pos[0],n.pos[1],n.dims[0],n.dims[1],i[0],i[1],n.dims[0],n.dims[1])})},n.prototype.prebake=function(){throw new Error("unimplemented")},n.fromAsepriteAtlas=function(t,e){return e=e||function(t){return t},new Promise(i=>{void 0!==r[t]&&r[t]instanceof n?i(r[t]):(console.log(o),o.requestAsset(t).then(a=>{let c,l=a.content,h=l.meta.size.w,u=l.meta.size.h,f=l.meta.layers.length,d=l.frames.length/f,p=u/f,m={},g=[];l.meta.layers.forEach((t,i)=>{g.push(t.name),void 0===m[t.name]&&(c={label:t.name.trim(),data:e(t.data?t.data:""),opacity:t.opacity,blendMode:t.blendMode,pos:s.b.vec2(0,i*p),frames:[]},m[c.label]=Object.freeze(c))});let b,w={default:{label:"default",data:e(""),pos:s.b.vec2(0,0),dims:s.b.vec2(h,u)}};l.meta.slices.forEach(t=>{void 0===w[t.name]&&(b={label:t.name.trim(),data:e(t.data?t.data:""),pos:s.b.vec2(t.keys[0].bounds.x,t.keys[0].bounds.y),dims:s.b.vec2(t.keys[0].bounds.w,t.keys[0].bounds.h)},w[b.label]=Object.freeze(b))});let y,v={};l.meta.frameTags.forEach(t=>{void 0===v[t.name]&&(y={label:t.name.trim(),start:t.from,length:t.to-t.from+1},v[y.label]=Object.freeze(y))}),l.frames.forEach((t,e)=>{let i=m[g[~~(e/d)]],n={pos:s.b.vec2(t.frame.x,t.frame.y),dims:s.b.vec2(t.frame.w,t.frame.h)};i.frames.push(Object.freeze(n))}),o.requestAsset(l.meta.image).then(e=>{let o=new n(Object.seal(m),Object.seal(v),Object.seal(w));o.init(e.content),r[t]=o,i(o)})}))})}},function(t,e,i){"use strict";var n=i(5),o=i(6);i(26);const s=n;e.b=s;const r=o;e.a=r},function(t,e,i){"use strict";function n(t){if(0===t.length)return[[]];for(var e=[],i=0;i<t.length;i++)for(var o=t.slice(),s=o.splice(i,1),r=n(o),a=0;a<r.length;a++){var c=s.concat(r[a]);e.push(c)}return e}function o(t){return t.map(t=>this[t])}function s(t){return"quaternion("+u.toArray(t).map(t=>t.toFixed(2)).join(", ")+")"}function r(t,e){e=e||a();return f(t,e)}function a(){let t=[0,0,0,1],e=Array.prototype.slice.apply(arguments),i=e.length;0===i?e=t:e[i-1]instanceof ArrayBuffer?e=1===i?t.concat(e).concat([0]):e.concat([0]):e[i-2]instanceof ArrayBuffer&&2===i&&(e=t.concat(e));return h.create.apply(null,[4].concat(e))}function c(t){return function(t){Object.defineProperties(t,{x:{get:function(){return this[0]}},y:{get:function(){return this[1]}},z:{get:function(){return this[2]}},w:{get:function(){return this[3]}}});for(let e=0,i=w.length;e<i;++e)Object.defineProperty(t,w[e].join(""),{get:o.bind(t,w[e])})}(t),u.wrap(t),t.slerp=l(y,t),t.normalize=l(r,t),t.invert=l(v,t),t.toString=s.bind(null,t),t.times=l(h.times,t),t.clamp=l(h.clamp,t),t.normalize=l(h.normalize,t),t.mut_normalize=l(h.mut_normalize,t),t.mut_times=l(h.mut_times,t),t.mut_clamp=l(h.mut_clamp,t),t.mut_copy=l(h.mut_copy,t),t}function l(t,e){return function(){return c(a(t.apply(null,[e].concat(Array.prototype.slice.apply(arguments)))))}}Object.defineProperty(e,"__esModule",{value:!0}),e.toString=s,e.normalize=r,e.create=a,e.wrap=c;var h=i(5),u=i(6);const f=h.normalize,{abs:d,sin:p,cos:m,acos:g,sqrt:b}=Math;let w=[];["xyzw","xyz","xzw","xyw","yzw","xy","xw","xz","yz","yw","zw"].forEach(t=>{n(t.split("")).forEach(t=>{w.push(t)})});const y=function(){let t=0,e=0,i=0,n=0,o=0,s=0,r=0,c=0,l=0,h=0,u=0,f=0,m=0;return function(w,y,v,E){return t=w[0],e=y[0],i=w[1],n=y[1],o=w[2],s=y[2],r=w[3],c=y[3],l=t*e+i*n+o*s+r*c,E=E||a(),d(l)>=1?(E[0]=t,E[1]=i,E[2]=o,E[3]=r,E):(u=g(l),h=b(1-l*l),f=p((1-v)*u)/h,m=p(v*u)/h,E[0]=t*f+e*m,E[1]=i*f+n*m,E[2]=o*f+s*m,E[3]=r*f+c*m,E)}}();e.slerp=y;const v=function(t,e=!0,i){return i=i||a(),e?r(t,i):i.set(t),i[0]=-i[0],i[1]=-i[1],i[2]=-i[2],i};e.invert=v,a.identity=function(){return a()},a.fromEulerAngles=function(){let t=0,e=0,i=0,n=0,o=0,s=0,r=0,c=0,l=0,h=0,u=0;return function(f,d,g){let b=a(d,g);return t=f[0]/2,e=f[1]/2,i=f[2]/2,n=m(t),o=p(t),s=m(e),r=p(e),c=m(i),l=p(i),h=n*s,u=o*r,b[0]=h*l+u*c,b[1]=o*s*c+n*r*l,b[2]=n*r*c-o*s*l,b[3]=h*c-u*l,b}}(),a.fromAxisAngle=function(){let t=0,e=0;return function(i,n,o,s){let r=a(o,s);return t=f(i),e=n/2,r[0]=t[0]*p(e),r[1]=t[1]*p(e),r[2]=t[2]*p(e),r[3]=m(e),r}}()},function(t,e,i){"use strict";function n(){return this}n.prototype.init=function(t){},n.prototype.write=function(t,e,i,n,o,s=1){}},function(t,e,i){"use strict";function n(t){return t>>1<<1}function o(){O||(O=!0,document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement?(document.exitFullscreen?document.exitFullscreen():document.msExitFullscreen?document.msExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen(),x.events.fire("fullscreen-off")):(document.documentElement.requestFullscreen?document.documentElement.requestFullscreen():document.documentElement.msRequestFullscreen?document.documentElement.msRequestFullscreen():document.documentElement.mozRequestFullScreen?document.documentElement.mozRequestFullScreen():document.documentElement.webkitRequestFullscreen&&document.documentElement.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT),x.events.fire("fullscreen-on")))}function s(t){return t.preventDefault(),O=!!(document.webkitIsFullScreen||document.mozIsFullScreen||document.msIsFullScreen),!1}function r(){P.width=x.width=n(m.clientWidth),P.height=x.height=n(m.clientHeight),x.orientation=x.width>x.height?0:1,x.minDimension=b(x.width,x.height),x.maxDimension=w(x.width,x.height),A.forEach(t=>{t.width=~~(x.width/x.pixelRatio),t.height=~~(x.height/x.pixelRatio)}),x.events.fire("resize")}function a(){requestAnimationFrame(a);try{let t=Date.now();(E=t-C)>v&&(C=t-E%v,S++,g(M),h.composite(A,P,x))}catch(t){console.error("Crappy uncaught error in animation loop is crappy")}}function c(t){x.pixelRatio=t.pixelRatio||x.pixelRatio,(m=document.querySelector(t.container)).classList.add("2d"),P=new h.CompositeBuffer(m),m.width=P.width=n(m.clientWidth),m.height=P.height=n(m.clientHeight),function(t){for(let e=0,i=t.length;e<i;++e){let i=t[e],n=new h.DrawBuffer(i.compositeMethod,i.scaleMethod);n.id=i.label,A.push(n),M[i.label]=n}}(t.bufferDescriptions),r(),g=t.frameCallback,window.addEventListener("resize",r),(y=t.fullscreen)&&(m.addEventListener("click",o),document.addEventListener("fullscreenchange",s),document.addEventListener("mozfullscreenchange",s),document.addEventListener("msfullscreenchange",s),document.addEventListener("webkitfullscreenchange",s)),p=Date.now(),C=p,v=1e3/d.b,_||requestAnimationFrame(a),_=!0}Object.defineProperty(e,"__esModule",{value:!0}),e.evenNumber=n,e.updateCompositeOperation=function(t,e){t.globalCompositeOperation!==e&&(t.globalCompositeOperation=e)},e.init=c;var l=i(29),h=i(30),u=i(9),f=i(31);i.n(f);i.d(e,"buffers",function(){return h}),i.d(e,"ui",function(){return f}),i.d(e,"util",function(){return l});var d=i(10);let p,m,g,{min:b,max:w}=Math,y=!1,v=0,E=0,S=0,_=!1,O=!1,C=0;const A=[],M={};e.buffersByLabel=M;let P;const x={width:0,height:0,pixelRatio:1,orientation:0,aspect:0,minDimension:0,maxDimension:0,events:new u.a};e.props=x;const T={get frameCount(){return S},get startTime(){return p},get lastFrame(){return C},get elapsed(){return E},get interval(){return v}};e.timing=T},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.drawCircle=function(t,e,i,n,o,s=0,r){t.globalCompositeOperation="source-over",t.beginPath(),t.arc(e,i,n,2*Math.PI,!1),t.fillStyle=o,t.fill(),r&&(t.strokeStyle=r,t.lineWidth=s,t.stroke()),t.closePath()}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DrawBuffer=function(t="source-over",e=o,i="2d"){return this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext(i),this.offsetX=0,this.offsetY=0,this.compositeMethod=t,this.scaleMethod=e,Object.defineProperties(this,{width:{get:()=>this.canvas.width,set:t=>this.canvas.width=t},height:{get:()=>this.canvas.height,set:t=>this.canvas.height=t}}),this},e.CompositeBuffer=function(t){return this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.container=t,this.container.appendChild(this.canvas),Object.defineProperties(this,{width:{get:()=>this.canvas.width,set:t=>this.canvas.width=t},height:{get:()=>this.canvas.height,set:t=>this.canvas.height=t}}),this};const{min:n}=Math,o=0;e.SCALE_STRETCH=o;e.SCALE_KEEP_ASPECT=1;e.SCALE_NONE=2;e.SCALE_CROP=3;const s=function(){let t,e,i,s,r,a,c,l,h,u,f,d;return function(p,m,g){for(s=m.context,1!==g.pixelRatio&&(s.imageSmoothingEnabled=!1),t=0,e=p.length;t<e;++t){switch(i=p[t],s.globalCompositeOperation!==i.compositeMethod&&(s.globalCompositeOperation=i.compositeMethod),i.scaleMethod){case o:c=0,l=0,r=i.width,a=i.height,f=i.offsetX,d=i.offsetY,h=m.width,u=m.height;break;case 1:c=0,l=0,r=i.width,a=i.height,f=i.offsetX,d=i.offsetY,h=m.width,u=m.height,g.orientation?(r=m.width,a=n(m.height,i.height),h=n(m.width,i.width),u=m.height):(r=n(m.width,i.width),a=m.height,h=m.width,u=n(m.height,i.height));break;case 3:c=0,l=0,r=n(m.width-i.offsetX,i.width),a=n(m.height-i.offsetY,i.height),f=i.offsetX,d=i.offsetY,h=n(m.width-i.offsetX,i.width),u=n(m.height-i.offsetY,i.height);break;default:c=0,l=0,r=i.width,a=i.height,f=i.offsetX,d=i.offsetY,h=i.width*g.pixelRatio,u=i.height*g.pixelRatio}s.drawImage(i.canvas,c,l,r,a,f,d,h,u)}}}();e.composite=s},function(t,e,i){"use strict"},function(t,e,i){"use strict";function n(t,e=0,i=1/0){return m(t)<m(e)?t=t<0?-e:e:m(t)>m(i)&&(t=t<0?-i:i),t}var o=i(10),s=i(0);const{minus:r,mut_clamp:a,mut_copy:c,mut_times:l,normalize:h,mut_normalize:u,magnitude:f,vec2:d}=s.b,{sqrt:p,abs:m,floor:g,ceil:b,round:w}=Math,y=function(){let t=0,e=0;return function(i,o=0,s=1/0){for(t=0,e=i.length;t<e;++t)i[t]=n(i[t],o,s)}}(),v=function(){let t,e;return function(i){for(t=0,e=i.length;t<e;t++){if(isNaN(i[t]))throw new Error("NaN vector");if(i[t]===1/0)throw new Error("Infinite vector");if(i[t]===-1/0)throw new Error("-Infinite vector")}}}();(function(){let t=d(),e=0,i=0,n=0,o=0})(),function(){let t=d(),e=0,i=0,n=0}(),function(){let t=d(),e=0,i=0,n=0,o=0,s=0}()},function(t,e,i){"use strict";function n(){if(arguments[0]instanceof ArrayBuffer&&"number"==typeof arguments[1]&&"number"==typeof arguments[2])this[o]=new Uint8Array(arguments[0],arguments[1],Math.ceil(arguments[2]/8));else{if("number"!=typeof arguments[0])throw Error("expected either length or buffer, offset, length as arguments");this[o]=new Uint8Array(Math.ceil(arguments[0]/8))}return this.length=8*this[o].byteLength,Object.freeze(this),this}const o=Symbol();n.prototype.get=function(t){let e=~~(t/8),i=t%8;return!!(this[o][e]&1<<i)},n.prototype.set=function(t,e){let i=~~(t/8),n=t%8;e?this[o][i]|=1<<n:this[o][i]&=255^1<<n},n.prototype.fill=function(t){this[o].fill(t?255:0)},n.prototype.recycle=function(){this[o].fill(0)}},function(t,e,i){"use strict"},function(t,e,i){"use strict";function n(t=0,e=0){return this.width=0,this.height=0,this.cellWidth=0,this.cellHeight=0,this.length=0,t&&e&&this.init(t,e),this}const{floor:o}=Math,s=Math.pow(2,16)-1,r=new Uint16Array(4),a=new Uint16Array(4),c=new Uint16Array(4),l=new Uint16Array(4),h=new Uint16Array(4),u=new Uint16Array(4);if(r[0]=4369,r[1]=r[0]<<1,r[2]=r[0]<<2,r[3]=r[0]<<3,(r[0]|r[1]|r[2]|r[3])!==s)throw new Error("MASK_X is bad");if(a[0]=15,a[1]=a[0]<<4,a[2]=a[0]<<8,a[3]=a[0]<<12,(a[0]|a[1]|a[2]|a[3])!==s)throw new Error("MASK_Y is bad");c[0]=0,c[1]=a[3],c[2]=c[1]|a[2],c[3]=c[2]|a[1],l[0]=0,l[1]=a[0],l[2]=l[1]|a[1],l[3]=l[2]|a[2],h[0]=0,h[1]=r[3],h[2]=h[1]|r[2],h[3]=h[2]|r[1],u[0]=0,u[1]=r[0],u[2]=u[1]|r[1],u[3]=u[2]|r[2];const f=Symbol();n.CHANNEL_RED=0,n.CHANNEL_GREEN=1,n.CHANNEL_BLUE=2,n.CHANNEL_ALPHA=3,n.fromCanvasPixels=function(t,e=0,i=n.CHANNEL_ALPHA){console.time("new CollisionMap");let o=new n(t.width,t.height);console.timeEnd("new CollisionMap");let s,r=t.getContext("2d");console.time("fromCanvasPixels loop");let a=!0;for(let n=0,c=t.height;n<c;n+=100){try{a&&console.time("getImageData"),s=r.getImageData(0,n,t.width,100).data,a&&console.timeEnd("getImageData")}catch(t){throw new Error("CollisionData:failed to get image data :(")}a&&console.time("loop map.set");for(let r=0,a=s.length;r<a;r+=4){let a=r/4%t.width,c=n+~~(r/4/t.width);s[r+i]>e&&o.set(a,c,!0)}a&&console.timeEnd("loop map.set"),a=!1}return console.timeEnd("fromCanvasPixels loop"),o};const d=n.cellBit=function(t,e){return 1<<t%4+e%4*4},p=n.cellMask=function(t,e){return function(t){return s^t}(d(t,e))},m=n.cellIndex=function(t,e,i){return o(e/4)*o(i/4)+o(t/4)};n.prototype.init=function(t,e){this.width=~~t,this.width%4&&(this.width+=4-~~t%4),this.height=~~e,this.height%4&&(this.height+=4-~~e%4),this.cellWidth=this.width/4,this.cellHeight=this.height/4;let i=this.cellWidth*this.cellHeight;return this.length!==i?(this.length=i,this.length&&(this[f]=new Uint16Array(this.length))):this[f]&&this[f].fill(0),this},n.prototype.getCell=function(t,e){return this[f][m(t,e,this.width)]},n.prototype.get=function(t,e){return this.getCell(t,e)&d(t,e)?1:0},n.prototype.set=function(t,e,i){i?this[f][m(t,e,this.width)]|=d(t,e):this[f][m(t,e,this.width)]&=p(t,e)},n.prototype.checkRect=function(t,e,i,n){let o,r,a=t%4,d=e%4,p=Math.ceil((a+i)/4),m=Math.ceil((d+n)/4);for(let t=0;t<m;++t){r=0===t?c[d]:t===m-1?l[d]:s;for(let e=0;e<p;++e)if((o=0===e?u[a]:e===p-1?h[a]:s)&r&this[f][t*this.cellWidth+e])return 1}return 0},n.prototype.intersect=function(t,e,i,n,o,s,r){let a,c,l=0;for(c=0;c<r;++c)for(a=0;a<r;++a)l+=this.get(e+a,i+c)&&t.get(n+a,o+c)?1:0;return l},n.MASK_X=r,n.MASK_Y=a,n.MASK_TOP=c,n.MASK_BOTTOM=l,n.MASK_LEFT=u,n.MASK_RIGHT=h},function(t,e,i){"use strict";function n(t,e){return Math.random()*(e-t)+t}function o(t,e,i,n){return"hsla("+t+","+e+"%,"+i+"%,"+n+")"}function s(){let t=c.width,e=c.height,i=Math.min(t,e),n=Math.max(t,e);l.fillStyle="black",l.fillRect(0,0,t,e);let o=l.createLinearGradient(0,0,t,e);o.addColorStop(0,p[0]),o.addColorStop(.5,p[1]),o.addColorStop(1,p[2]),l.fillStyle=o,l.fillRect(0,0,t,e),(o=l.createLinearGradient(0,e,t,0)).addColorStop(0,m[0]),o.addColorStop(.5,m[1]),o.addColorStop(1,m[2]),l.fillStyle=o,l.fillRect(0,0,t,e);let s=(n-i)/n;(o=l.createRadialGradient(t/2,e/2,n/2,t/2,e/2,0)).addColorStop(1,"rgba(32,32,32,0.5)"),o.addColorStop(s+.06,"rgba(0,0,0,0.8)"),o.addColorStop(s+.05,"rgba(128,128,128,1.0)"),o.addColorStop(s+.04,"rgba(255,255,255,0.6)"),o.addColorStop(s+.03,"rgba(255,255,255,0.8)"),o.addColorStop(s+.025,"rgba(255,255,255,0.8)"),o.addColorStop(s+.005,"rgba(255,255,255,0.5)"),o.addColorStop(0,"rgba(255,255,255,0.01)"),l.fillStyle=o,l.globalCompositeOperation="luminosity",l.fillRect(0,0,t,e),l.globalCompositeOperation="source-in"}Object.defineProperty(e,"__esModule",{value:!0}),e.init=function(t){u=t.props,a=t.buffersByLabel.bokehBack,l=a.context,c=t.buffersByLabel.bokehFront,h=c.context;let e=a.width+a.height,i=c.width,o=c.height;d.length=0;for(var r=0;r<Math.floor(.01*(i+o));r++)d.push({radius:n(.005*e,.02*e),x:n(0,i),y:n(0,o),angle:n(0,f),vel:n(.05,.2),tick:n(0,1e4)});s(),u.events.on("resize",s)},e.generateBackground=s,e.draw=function(){var t=d.length;let e=c.width,i=c.height;for(h.fillStyle="rgba(0,0,0,0)",h.globalCompositeOperation="source-over",h.clearRect(0,0,e,i),h.shadowBlur=15,h.shadowColor="#fff";t--;){var s=d[t];s.x+=Math.cos(s.angle)*s.vel,s.y+=Math.sin(s.angle)*s.vel,s.angle+=n(-.05,.05),h.beginPath(),h.arc(s.x,s.y,s.radius,0,f),h.fillStyle=o(0,0,100,.03+.01*Math.cos(.02*s.tick)),h.fill(),s.x-s.radius>e&&(s.x=-s.radius),s.x+s.radius<0&&(s.x=e+s.radius),s.y-s.radius>i&&(s.y=-s.radius),s.y+s.radius<0&&(s.y=i+s.radius),s.tick++}};var r=i(2);let a,c,l,h,u,f=2*Math.PI,d=[],p=["rgba(255,64,64,1.0)","rgba(64,255,64,1.0)","rgba(64,64,255,1.0)"];Object(r.shuffle)(p);let m=["rgba(255,64,64,0.8)","rgba(64,255,64,0.8)","rgba(64,64,255,0.8)"];Object(r.shuffle)(m)},function(t,e,i){"use strict";function n(){let t,e,{width:i,height:n,minDimension:o,orientation:s}=x;_.width=O.width=o,_.height=O.height=o,s?(t=0,e=(n-i)/2):(t=(i-n)/2,e=0),_.offsetX=O.offsetX=t,_.offsetY=O.offsetY=e}Object.defineProperty(e,"__esModule",{value:!0});var o=i(0),s=i(11),r=i(1),a=i(2),c=i(7),l=i(3),h=i(8),u=i(12);const{vec2:f,lerp:d}=o.b,{mut_plus:p}=o.a;let{min:m,cos:g,sin:b,sqrt:w,tan:y,round:v,PI:E}=Math;const S=r.TARGET_FPS;let _,O,C,A,M,P,x,T,j,I,z,R=Array(3);const k=function(){let t=f(),e=f(),i=f(),n=f(),o=f(),s=f(),r=0,c=0,l=0,h=0,u=0,m=0,w=0,E=0,S=0,O=0,C=0,A=0,P=0,x=0;return function(f,T,j,I,z,R=4,k=0){u=.9,S=.7,O=.9,l=.57121,E=.71213,d(T,j,h=.6,t),d(T,j,S,e),d(T,j,u,i),d(T,j,O,n),p(Object(a.rotate)(t,i,y(g((M+k)*l)),o),t),p(Object(a.rotate)(e,n,y(b((M+k)*E)),s),e),C=T[0],A=T[1],P=j[0],x=j[1],r=o[0],c=o[1],m=s[0],w=s[1],_.width>_.height?(C=C,P=P,r=r,m=m):(A=A,x=x,c=c,w=w),f.beginPath(),f.moveTo(C,A),f.bezierCurveTo(r,c,m,w,P,x),f.strokeStyle=I,f.lineWidth=v(g((M+k)*l)*R),f.lineCap="round",f.stroke(),f.closePath(),f.beginPath(),f.moveTo(C,A),f.bezierCurveTo(r,c,m,w,P,x),f.strokeStyle=z,f.lineWidth=v(g((M+k)*l)*~~(R/4)),f.lineCap="round",f.stroke(),f.closePath()}}(),D=function(){let t,e=0,i=0,n=0,o=0,r=0,a=f(),l=f(),d=0,p=0,m=0,y=0,v=0,E=0,_=0;return function(f){C.globalCompositeOperation="lighter",E=Object(c.screenSpace)(f.pos[0]),_=Object(c.screenSpace)(f.pos[1]),({pulse:e,pregnant:i,injured:n,lastMeal:o}=f),r=f.size*x.minDimension,i?(d=r*g(.2*(M+e))*(w(i)+1),p=r*b(.2*(M+e+S))*(w(i)+1)*.1):n?(d=r*g((M+e)*(1-1/n+.2)),p=r*b(.2*(M+e+S))*.1):(d=r*g(.2*(M+e)),p=r*b(.2*(M+e+S))*.1),m=.5*d,y=.5*p,v=s.colorIndex(f.color[h.d],f.color[h.c],f.color[h.b]),t=s.getMoteSprite(v),C.drawImage(t.canvas,t.sx,t.sy,t.sw,t.sh,E-m,_-m,d,d),t=I,C.drawImage(t.canvas,t.sx,t.sy,t.sw,t.sh,E-m,_-m,d,d),f.target&&f.action==u.a&&(a[0]=E,a[1]=_,l[0]=Object(c.screenSpace)(f.target.pos[0]),l[1]=Object(c.screenSpace)(f.target.pos[1]),k(C,a,l,s.getColorString(v),"white",5,e))}}(),N=function(){let t,e=0,i=0,n=0,o=0,s=0,a=0;return function(l){Object(c.updateCompositeOperation)(C,"lighter"),n=Object(c.screenSpace)(l.pos[0]),o=Object(c.screenSpace)(l.pos[1]),t=R[l.color],s=r.PHOTON_BASE_SIZE*x.minDimension,a=l.pulse,e=.75*s*(g(.3*(M+a))*b(.1*(M+a)))+.25*s,i=.5*e,C.drawImage(t.canvas,0,0,t.pixelSize,t.pixelSize,n-i,o-i,e,e)}}(),L=function(){let t,e=0,i=0,n=0,o=0,r=0,a=0,l=0,u=0,f=0;return function(d){switch(n=Object(c.screenSpace)(d.pos[0]),o=Object(c.screenSpace)(d.pos[1]),e=d.size*x.minDimension*1+b(.2*M),i=.5*e,t=T,Object(c.updateCompositeOperation)(A,"source-over"),A.drawImage(t.canvas,n-i,o-i,e,e),d.lastMeal){case-1:f=2184;break;case h.d:f=3908;break;case h.c:f=1268;break;case h.b:f=1103}u=.5*(l=1.7*e),r=b(.0127*M)*e*.1,a=g(.0127*M)*e*.1,t=s.getMoteSprite(4095),Object(c.updateCompositeOperation)(A,"soft-light"),A.drawImage(t.canvas,t.sx,t.sy,t.sw,t.sh,n+r-u,o+a-u,l,l),u=.5*(l=1.2*e),r=g(.023*M)*e*.13,a=b(.023*M)*e*.13,t=s.getMoteSprite(f),A.drawImage(t.canvas,t.sx,t.sy,t.sw,t.sh,n+r-u,o+a-u,l,l),t=s.getMoteSprite(0),u=.5*(l=1.65*e),r=b(.0122*M)*e*.15,a=g(.0122*M)*e*.15,Object(c.updateCompositeOperation)(A,"multiply"),A.drawImage(t.canvas,t.sx,t.sy,t.sw,t.sh,n+r-u,o+a-u,l,l)}}(),F=function(){let t,e=0,i=0,n=0,o=0,r=0,a=0,l=0,h=0;return function(u){Object(c.updateCompositeOperation)(C,"lighter"),n=Object(c.screenSpace)(u.pos[0]),o=Object(c.screenSpace)(u.pos[1]),e=u.size*x.minDimension,i=.5*e,t=j,C.drawImage(t.canvas,n-i,o-i,e,e),l=g(.2*M)*e*1.7,h=.5*l,t=s.getMoteSprite(819),C.drawImage(t.canvas,t.sx,t.sy,t.sw,t.sh,n-h,o-h,l,l),h=.5*(l=1.3*e),r=b(.08*M)*e*.1,a=g(.08*M)*e*.1,t=s.getMoteSprite(1280),C.drawImage(t.canvas,t.sx,t.sy,t.sw,t.sh,n+r-h,o+a-h,l,l),r=b(.08*M+2.094394)*e*.1,a=g(.08*M+2.094394)*e*.1,t=s.getMoteSprite(80),C.drawImage(t.canvas,t.sx,t.sy,t.sw,t.sh,n+r-h,o+a-h,l,l),r=b(.08*M+4.188789)*e*.1,a=g(.08*M+4.188789)*e*.1,t=s.getMoteSprite(5),C.drawImage(t.canvas,t.sx,t.sy,t.sw,t.sh,n+r-h,o+a-h,l,l)}}(),G=function(){function t(t,e){p=b(.08*M+t)*y*e,w=g(.08*M+t)*y*e,o[0]=u+p,o[1]=d+w,k(A,n,o,a,l,r)}let e,i=0,n=f(),o=f(),r=4,a="rgba(0,0,0,0.3)",l="rgba(0,0,0,0.7)",h=E*(1/3),u=0,d=0,p=0,w=0,y=0,v=0;return function(o){Object(c.updateCompositeOperation)(A,"multiply"),u=Object(c.screenSpace)(o.pos[0]),d=Object(c.screenSpace)(o.pos[1]),i=o.size*x.minDimension,r=m(4,~~((y=i)/2)),v=.5*y,n[0]=u,n[1]=d,t(0,.5),t(2*h,.5),t(4*h,.5),t(h,.25),t(3*h,.25),t(5*h,.25),e=s.getMoteSprite(0),A.drawImage(e.canvas,e.sx,e.sy,e.sw,e.sh,u-v,d-v,y,y)}}();e.init=function(t){x=t.props,P=t.timing,_=t.buffersByLabel.entitiesLight,O=t.buffersByLabel.entitiesDark,C=_.context,A=O.context,n(),x.events.on("resize",n),T=s.createVoidSprite(1e3,1),j=s.createEmitterSprite(x.minDimension,1),R[h.d]=s.createPhotonSprite(x.minDimension,r.PHOTON_BASE_SIZE,"red"),R[h.c]=s.createPhotonSprite(x.minDimension,r.PHOTON_BASE_SIZE,"green"),R[h.b]=s.createPhotonSprite(x.minDimension,r.PHOTON_BASE_SIZE,"blue"),s.initMoteSpriteSheet(1e3,4*r.MOTE_BASE_SIZE),z=s.createGameSpaceMask(),I=s.createMoteCenterSprite()};const B=function(){let t,e,i,n,o;return function(s){for(Object(c.updateCompositeOperation)(C,"source-over"),C.fillStyle="rgba(0,0,0,0.3)",C.fillRect(0,0,_.width,_.height),Object(c.updateCompositeOperation)(A,"destination-out"),A.fillStyle="rgba(0,0,0,0.1)",A.clearRect(0,0,O.width,O.height),M=P.frameCount,t=0,e=s.entities.length;t<e;++t)i=s.entities[t],n=Object(c.screenSpace)(i.pos[0]),o=Object(c.screenSpace)(i.pos[1]),Object(c.offscreen)(n,o)||(i instanceof l.Mote?D(i):i instanceof l.Photon?N(i):i instanceof l.Void?L(i):i instanceof l.Emitter?F(i):i instanceof l.AntiGravitonCluster&&G(i));Object(c.updateCompositeOperation)(C,"destination-out"),C.drawImage(z.canvas,0,0,x.minDimension,x.minDimension),Object(c.updateCompositeOperation)(A,"destination-out"),A.drawImage(z.canvas,0,0,x.minDimension,x.minDimension)}}();e.draw=B},function(t,e,i){"use strict";function n(t=c(),e=c(),i=1,n,o){return this.pos=c(t),this.vel=c(e),this.birthMass=i,this.mass=1,this.initialMass=i,this.photonPool=n,this.arms=o||m(d()*d()*50),this.size=0,this.next=~~(3*d()),this}e.a=n;var o=i(0),s=i(1),r=i(2),a=i(3);let{vec2:c,times:l,mut_times:h,distance:u}=o.b,{mut_plus:f}=o.a,{random:d,sqrt:p,ceil:m,min:g,PI:b}=Math;const w=c(0,0);let y,v=c(),E=0,S=0,_=0,O=0,C=0,A=0,M=0;n.prototype.tick=function(t,e,i){if(this.birthMass>0&&(M=g(this.birthMass,m(this.mass/100)),this.birthMass-=M,this.mass+=M),this.size=p(this.mass/b)*s.EMITTER_SIZE,0===this.birthMass&&(E=this.initialMass/20,_=m(s.TARGET_FPS/E),S=E/s.TARGET_FPS,i%_==0))for(;S-- >0&&this.mass>0;)this.mass--,t.push(this.emitPhoton());for(f(this.pos,l(this.vel,e,v)),f(this.vel,Object(r.drag)(this.vel,s.GLOBAL_DRAG)),f(this.vel,Object(r.avoid)(this.vel,this.pos,w,1.3,.001,v)),O=0,C=t.length;O<C;++O)(y=t[O])!==this&&(A=u(this.pos,y.pos),y instanceof n?f(y.vel,h(Object(r.gravitate)(y.pos,this.pos,this.mass*y.mass,v),1/y.mass)):f(y.vel,h(Object(r.gravitate)(y.pos,this.pos,-this.mass*y.mass,v),1/y.mass)))},n.prototype.emitPhoton=function(){let t=c(),e=0,i=0,n=0;return function(){return n=this.next,t[0]=this.size/5,t[1]=this.size/5,f(t,this.pos),i=this.mass%this.initialMass,e=i/(this.initialMass/2),e+=i%this.arms*(2/this.arms),f(Object(r.rotate)(t,this.pos,e,t),this.pos),this.next=~~(3*d()),new a.Photon(t,c(0,0),n,this.photonPool)}}()},function(t,e,i){"use strict";function n(t,e,i=o.TARGET_FPS){this.type=t,this.pos=s.b.vec2(e),this.start=i,this.lifetime=i}e.a=n;var o=i(1),s=i(0);n.prototype.tick=function(){this.lifetime--}},function(t,e,i){"use strict";function n(t=c(),e=c(),i=1,n){return this.pos=c(t),this.vel=c(e),this.size=0,this.birthMass=this.initialMass=i,this.mass=1,this.photonPool=n,this.instability=0,this.size=0,this}e.a=n;var o=i(0),s=i(2),r=i(3),a=i(1);const{vec2:c,times:l,distance:h,mut_copy:u}=o.b,{mut_plus:f}=o.a,{random:d,sqrt:p,PI:m,ceil:g,min:b,max:w}=Math,y=c(0,0);let v,E=c(),S=0,_=0,O=0,C=0;n.prototype.tick=function(t,e,i){if(this.birthMass>0&&(C=b(this.birthMass,g(this.mass/10)),this.birthMass-=C,this.mass+=C),this.size=p(.05*this.mass/m)*a.MOTE_BASE_SIZE,f(this.pos,l(this.vel,e,E)),this.initialMass=w(this.mass,this.initialMass),f(this.vel,Object(s.avoid)(this.vel,this.pos,y,1.3,.01,E)),f(this.vel,Object(s.drag)(this.vel,a.GLOBAL_DRAG)),0===this.birthMass&&(this.instability+=.003*this.mass),i%g(.05*a.TARGET_FPS)==0)for(;this.instability>0&&this.mass>0;)t.push(this.emitPhoton()),this.mass-=b(this.mass,7),this.instability-=.9;for(S=0,_=t.length;S<_;++S)if((v=t[S])!==this&&(O=h(this.pos,v.pos),v instanceof r.Void))return O<.5*(v.size+this.size)&&(C=b(v.mass,g((v.mass+v.birthMass)/10)),this.mass+=C,v.mass-=C,this.instability+=.07*C),void(O<10*this.size&&f(this.vel,Object(s.accelerate)(this.pos,v.pos,this.size*O*5,E)))},n.prototype.emitPhoton=function(){let t=c(),e=c(),i=c(),n=0,o=0,a=0;return function(){return a=~~(3*d()),t[0]=.1*this.size,t[1]=.1*this.size,f(t,this.pos),u(e,this.vel),o=this.mass%this.initialMass,n=o/(this.initialMass/2),n+=o%100*.02,u(i,Object(s.rotate)(t,this.pos,n,t)),f(i,this.pos),f(t,i),f(e,Object(s.accelerate)(this.pos,t,2*this.size,E)),new r.Photon(t,e,a,this.photonPool)}}()},function(t,e,i){"use strict";function n(t,e){let i=0;if(e){if(t*e>o)throw new Error("requested buffer size is too large");i=t*e}else i=function(t){return o-o%t}(t);let n=new ArrayBuffer(i),s=function(t){return t<Math.pow(2,8)?new Uint8Array(t):t<Math.pow(2,16)?new Uint16Array(t):new Uint32Array(t)}(e||i/t);return Object.defineProperties(this,{itemLength:{get:()=>t},buffer:{get:()=>n},size:{get:()=>i},freed:{get:()=>s}}),this.next=0,this.freedPos=0,this}e.a=n;const o=Math.pow(2,21);let s=0;n.prototype.allocate=function(){if(this.freedPos>0)s=this.popFree();else{if(!(this.next<this.size-1))throw new Error("pool buffer is full");s=this.next,this.next=this.next+this.itemLength}return s},n.prototype.popFree=function(){return this.freedPos--,s=this.freed[this.freedPos]*this.itemLength,this.freed[this.freedPos]=0,s},n.prototype.free=function(t){this.freed[this.freedPos]=0===t?t:t/this.itemLength,this.freedPos++}},function(t,e,i){"use strict";function n(t,e,i,n,o){let s=.5*n,r=.122*n,a=e-s,c=i,l=e,h=i-o,u=e+s,f=i,d=a+r,p=c-r,m=a+r,g=h,b=u-r,w=h,y=u-r,v=f-r,E="rgba(255,255,255,0.1)";t.beginPath(),t.moveTo(a,c),t.bezierCurveTo(d,p,m,g,l,h),t.bezierCurveTo(b,w,y,v,u,f),t.fillStyle=E,t.strokeStyle=E,t.lineWidth=4,t.fill(),t.closePath()}function o(){h.width=u.width,h.height=u.height}Object.defineProperty(e,"__esModule",{value:!0}),e.draw=function(){let t=u.width,e=u.height,i=c(100,.1*t),o=c(47,.047*t),{move:h,down:d}=a.c;l.clearRect(0,0,t,e),n(l,.5*t,e,i,o),n(l,.333*t,e,i,o),n(l,.666*t,e,i,o),Object(s.drawCircle)(l,h[0],h[1],5,"white"),a.a[0]&&(l.beginPath(),l.moveTo(d[0],d[1]),l.lineTo(h[0],h[1]),l.strokeStyle="white",l.lineWidth=2,l.stroke(),l.closePath()),r.DEBUG&&f()},e.init=function(t){u=t.props,h=t.buffersByLabel.ui,o(),u.events.on("resize",o),l=h.context};var s=i(7),r=i(1),a=i(14);const{max:c}=Math;let l,h,u;const f=function(){let t,e,i,n;return function(){t=u.width,e=u.height,i=t/2,n=e/2,Object(s.drawCircle)(l,0,0,4,"yellow",1,"white"),Object(s.drawCircle)(l,i,0,4,"orange",1,"white"),Object(s.drawCircle)(l,t,0,4,"red",1,"white"),Object(s.drawCircle)(l,0,n,4,"white",1,"white"),Object(s.drawCircle)(l,i,n,4,"gray",1,"white"),Object(s.drawCircle)(l,t,n,4,"black",1,"white"),Object(s.drawCircle)(l,0,e,4,"blue",1,"white"),Object(s.drawCircle)(l,i,e,4,"cyan",1,"white"),Object(s.drawCircle)(l,t,e,4,"green",1,"white")}}()},function(t,e,i){"use strict";function n(){return this.queue={},this}e.a=n,n.prototype.on=function(t,e){void 0===this.queue[t]&&(this.queue[t]=[]),this.queue[t].push(e)},n.prototype.fire=function(){let t,e;return function(i,n){if(void 0!==this.queue[i])for(t=0,e=this.queue[i].length;t<e;++t)this.queue[i][t].call(n)}}()}]);
//# sourceMappingURL=photonomix.js.map